(function($){Drupal.compactForms={};$.fn.compactForm=function(stars){stars=stars||0;this.each(function(){$(this).addClass('compact-form').find('label').each(function(){var context=this.form;var $label=$(this);if(!$label.attr('for')){return;}var $field=$('#'+$label.attr('for'),context);if(!$field.length||!$field.is('input:text,input:password,textarea')){return;}var initial_value=$field.val();if(initial_value!=''){$label.css('display','none');}$label.parent().addClass('compact-form-wrapper');$label.addClass('compact-form-label');$field.addClass('compact-form-field');if(stars===0){$label.find('.form-required').hide();}else if(stars===2){$label.find('.form-required').insertAfter($field).prepend('&nbsp;');}$field.focus(function(){if($field.val()===initial_value||$field.val()===''){$label.fadeOut('fast');}});$field.blur(function(){if($field.val()===''){$label.fadeIn('slow');}});$field.change(function(){if($field.get(0)!=document.activeElement){if($field.val()===''){$label.fadeIn('fast');}else{$label.css('display','none');}}});});});};Drupal.behaviors.compactForms={attach:function(context,settings){if(!settings||!settings.compactForms){return;}$('#'+settings.compactForms.forms.join(',#'),context).compactForm(settings.compactForms.stars);if($.browser.safari){setTimeout(Drupal.compactForms.fixSafari,200);}}};Drupal.compactForms.fixSafari=function(){$('label.compact-form-label').each(function(){var $label=$(this);var context=this.form;if($('#'+$label.attr('for'),context).val()!=''){$label.css('display','none');}});}})(jQuery);